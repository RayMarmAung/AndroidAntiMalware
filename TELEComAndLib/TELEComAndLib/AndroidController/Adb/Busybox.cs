//* ******************************************************************************
//* BusyBox.vb Developed by Ray Marm Aung (Ray -Electronics) for TELEComLib.dll  *
//* ******************************************************************************

using System.Collections.Generic;
using System.IO;

namespace Telecom.Android
{
    public class BusyBox
    {

        #region "Fields"


        private Device _device;
        private bool _isInstalled = false;

        private string _exists = "Not Installed";
        #endregion

        #region "Properties"
        public bool IsInstalled
        {

            get
            {
                _isInstalled = false;

                //string dump = Adb.ExecuteAdbCommand(Adb.FormAdbShellCommand(_device, false, "busybox"));

                AdbCommand dump = Adb.FormAdbShellCommand(_device, false, "busybox");

                using (StringReader s = new StringReader(Adb.ExecuteAdbCommand(dump)))
                {
                    string check = s.ReadLine();

                    if (!check.Contains("busybox: not found"))
                    {
                        _isInstalled = true;
                    }

                }

                return _isInstalled;
            }
        }
        public string Exists
        {

            get
            {
                string dump = _device.Info.BusyBox;

                using (StringReader s = new StringReader(dump))
                {
                    string check = s.ReadLine();

                    if (!(check == null))
                    {
                        if (!check.Contains("busybox: not found"))
                        {
                            _exists = "Installed";
                        }
                    }

                }

                return _exists;
            }
        }
        #endregion

        #region "Procedures"
        internal BusyBox(Device dev)
        {
            _device = dev;
        }
        #endregion

    }

}
